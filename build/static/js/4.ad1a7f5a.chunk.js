(this["webpackJsonpon-budget"]=this["webpackJsonpon-budget"]||[]).push([[4],{496:function(e,t,a){},504:function(e,t,a){},505:function(e,t,a){},507:function(e,t,a){},509:function(e,t,a){},512:function(e,t,a){},513:function(e,t,a){},518:function(e,t,a){},519:function(e,t,a){},520:function(e,t,a){},521:function(e,t,a){},522:function(e,t,a){},523:function(e,t,a){},524:function(e,t,a){},525:function(e,t,a){},539:function(e,t,a){"use strict";a.r(t);var n=a(11),r=a(0),c=a(25),s=a(113),i=a.n(s),o=a(168),l=a(172),u=a(169),d=function(){return function(){var e=Object(o.a)(i.a.mark((function e(t,a,n){var r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.getFirebase,c=n.api,e.abrupt("return",c({dispatch:t,getState:a,getFirebase:r,path:"transactions"}).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.transactions;return t({type:"".concat(u.c,"_SUCCESS"),payload:a}),a})).finally((function(){t(b("overview")),t(b("overallSpending")),t(b("categoryBreakdown")),t(b("transactionOverview"))})));case 2:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()},b=function(e){return{type:"SET_".concat(l.b),payload:e}},j=a(490),f=a(503),p=a(530),m=a(531),O=a(532),h=a(540),g=function(e){return e.app.categories},v=Object(j.a)([g],(function(e){return e.filter((function(e){return e.isBill}))})),x=Object(j.a)([g],(function(e){return e.filter((function(e){return e.isDeposit}))})),y=Object(j.a)([g],(function(e){return e.filter((function(e){var t=e.isBill;return!e.isDeposit&&!t}))})),N=function(e){return e.ui.date},C=function(e){return e.app.transactions},S=function(e){var t=e.thisMonth;return function(e,a,n){if(!e.length||!a.length)return[];var r=a.map((function(e){return e.id}));return e.filter((function(e){var a=e.categoryId,c=e.date,s=r.includes(a);return t?Object(f.a)(c,n)&&s:s&&Object(p.a)(new Date(c),Object(m.a)(Object(O.a)(n,-12)))&&!Object(p.a)(new Date(c),n)}))}},w=Object(j.a)([C,v,N],S({thisMonth:!0})),F=Object(j.a)([C,x,N],S({thisMonth:!0})),D=Object(j.a)([C,y,N],S({thisMonth:!0})),T=Object(j.a)([C,w,F,D],(function(e,t,a,n){return{all:e,bills:t,deposits:a,unplanned:n}})),I=(Object(j.a)([C,y,N],S({thisMonth:!1})),Object(j.a)([C,y,N],(function(e,t,a){if(!(e||[]).length||!(t||[]).length)return null;var n=t.map((function(e){return e.id})),r=Array(12).fill(0).map((function(e,t){return Object(m.a)(Object(O.a)(a,-(11-t)))})),c=e.reduce((function(e,a){if(n.includes(a.categoryId)){var c=t.find((function(e){return e.id===a.categoryId}));e[c.name]||(e[c.name]={label:c.name,backgroundColor:c.color,data:[0,0,0,0,0,0,0,0,0,0,0,0]});var s=r.findIndex((function(e){return Object(f.a)(e,a.date)}));e[c.name].data[s]+=a.amount}return e}),{});return{datasets:Object.values(c),labels:r.map((function(e){return Object(h.a)(e,"MMM yyyy")}))}}))),k=a(486),M=a(14),E=a.n(M),L=a(476),A=(a(504),function(e){var t=e.title,a=e.children,r=e.className,c=e.small,s=void 0!==c&&c,i=e.wrapped,o=void 0!==i&&i,l=e.optionalContent,u=e.centered,d=void 0!==u&&u,b=e.flexContent,j=void 0===b||b,f=e.gridContent,p=void 0!==f&&f,m=e.transparent,O=void 0!==m&&m,h=e.spaceBetween,g=void 0!==h&&h;return Object(n.jsxs)("div",{className:E()("Card",{CardSmall:s,CardTransparent:O},r),children:[(t||l)&&Object(n.jsxs)("div",{className:"Row",children:[!!t&&Object(n.jsx)("p",{className:"title",children:t}),l]}),o?Object(n.jsx)("div",{className:E()("content",{grid:p,flex:j,centered:d,"space-between":g}),children:a}):a]})}),P=a(506),B=(a(505),{setMonth:function(e){return function(t,a,n){n.getFirebase,n.api;t({type:"SET_".concat(l.a),payload:e})}},fetchTransactionsByMonth:function(e){return function(){var t=Object(o.a)(i.a.mark((function t(a,n,r){var c,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.getFirebase,s=r.api,t.abrupt("return",s({body:e,dispatch:a,getState:n,getFirebase:c,path:"transactionsByMonth"}).then((function(e){var t=e.transactionsByMonth;a({type:"".concat(u.c,"_BY_MONTH_SUCCESS"),payload:t})})));case 2:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}()}}),_=Object(c.c)((function(e){return{date:e.ui.date}}),B)((function(e){var t=e.date,a=e.setMonth,c=e.classNames,s=e.fetchTransactionsByMonth,i=Object(r.useState)([t]),o=Object(k.a)(i,2),l=o[0],u=o[1];if(!t)return null;var d=Object(P.a)(t);return Object(n.jsx)(A,{small:!0,transparent:!0,className:E()("MonthDisplay",c),children:Object(n.jsxs)("div",{className:"wrapper flex centered space-between",children:[Object(n.jsx)("button",{type:"button",onClick:function(){var e=Object(O.a)(t,-1);if(!l.some((function(t){return Object(f.a)(e,t)}))){var n=Object(m.a)(Object(O.a)(e,-12));u(l.concat(e)),s(n.getTime())}a(e)},className:E()("Button","PreviousMonth"),children:Object(n.jsx)(L.d,{})}),Object(n.jsx)("p",{className:"Month",children:Object(h.a)(t,"MMM yyyy")}),Object(n.jsx)("button",{type:"button",onClick:function(){var e=Object(O.a)(t,1);a(e)},disabled:d,className:E()("Button","NextMonth"),children:Object(n.jsx)(L.e,{})})]})})})),q=a(10),R=a(488),V=a(542),U=a(533),G=(a(507),function(e){var t=e.title,a=e.isOpen,r=e.children,c=e.className,s=e.isDisabled,l=e.isSubmitting,u=e.isScrollable,d=e.handleCloseModal,b=e.handlePrimaryClick,j=e.handleSecondaryClick,f=e.handleCloseModalComplete,p=Object(R.a)(e,["title","isOpen","children","className","isDisabled","isSubmitting","isScrollable","handleCloseModal","handlePrimaryClick","handleSecondaryClick","handleCloseModalComplete"]),m=function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:f&&setTimeout((function(){f()}),300);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsx)(V.a,Object(q.a)(Object(q.a)({hasForm:!0,open:a,modalHeading:t,secondaryButtonText:"Clear",onRequestClose:m,"aria-label":"".concat(t," Modal"),hasScrollingContent:u,onRequestSubmit:b,onSecondarySubmit:j,primaryButtonText:l?Object(n.jsx)(U.a,{}):p.primaryButtonText||"Submit"},p),{},{className:E()("Modal",{"Modal--disabled":s,"Modal--submitting":l},c),children:r}))});G.defaultProps={preventCloseOnClickOutside:!0};var Y,W=G,H=a(79),z=a(47),J=a(543),K=a(534),Q={values:{name:"",isBill:!1,isDeposit:!1},state:{isModalOpen:!1,isFormDirty:!1,isSubmitting:!1,areFieldsMounted:!1}},X=function(e){var t=e.formValues,a=e.setFormValues,r=function(e){return function(t){var n;a(Object(z.a)({},e,(null===t||void 0===t||null===(n=t.target)||void 0===n?void 0:n.value)||t))}};return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"Row",children:Object(n.jsx)(J.a,{id:"name",labelText:"Name",autoComplete:"off",value:t.name,onChange:r("name")})}),Object(n.jsxs)("div",{className:"Row",children:[Object(n.jsx)(K.a,{id:"isBill",labelText:"Bill?",checked:t.isBill,onChange:r("isBill")}),Object(n.jsx)(K.a,{id:"isDeposit",labelText:"Deposit?",checked:t.isDeposit,onChange:r("isDeposit")})]})]})},Z=function(e){return Object(q.a)(Object(q.a)({},Q),e)},$=(a(496),function(e){return isNaN(e)?0:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}),ee=function(e){var t=e.name,a=e.quantity,r=e.total,c=e.color,s=e.handleOnClick;return Object(n.jsxs)("li",{className:"Category",onClick:s,style:{borderLeftColor:c},children:[Object(n.jsxs)("div",{className:"left",children:[Object(n.jsx)("span",{className:"title",children:t}),Object(n.jsxs)("span",{className:"transactions",children:[a," transaction",1===a?"":"s"]})]}),Object(n.jsx)("div",{className:"right flex align-center",children:Object(n.jsx)("span",{className:"amount",children:$(r)})})]})},te={ALL:"All",BILLS:"Bills",DEPOSITS:"Deposits",UNPLANNED:"Unplanned"},ae=a(535),ne=a(536),re=function(e){var t=e.setFilter;return Object(n.jsx)(ae.a,{light:!0,inline:!0,dir:"rtl",size:"sm",labelText:"Filter",id:"CategoryFilters",className:"CategoryFilters",onChange:function(e){t(te[e.target.value])},children:Object.keys(te).map((function(e,t){return Object(n.jsx)(ne.a,{value:e,text:te[e]},"filtercategory-".concat(t))}))})},ce=a(537),se=function(){return Object(n.jsxs)("li",{className:E()("Category","CategorySkeleton"),style:{borderLeftColor:"var(--shadow)"},children:[Object(n.jsxs)("div",{className:"left",children:[Object(n.jsx)("span",{className:"title",children:Object(n.jsx)(ce.a,{})}),Object(n.jsx)("span",{className:"transactions",children:Object(n.jsx)(ce.a,{})})]}),Object(n.jsx)("div",{className:"right flex align-center",children:Object(n.jsx)("span",{className:"amount",children:Object(n.jsx)(ce.a,{})})})]})},ie=a(538),oe=["#f79694","#f7b494","#f7f794","#c6f794","#94f794","#94f7c6","#94f7f7","#94c6f7","#9494f7","#c694f7","#f794f7","#f794c6","#945a59","#947759","#949459","#779459","#599459","#599477","#599494","#597794","#775994","#945994","#593635","#594735","#475935","#355947","#355959","#354759","#353559","#593559","#473559","#352020","#352b20","#2b3520","#20352b","#203535","#202b35","#352035","#2b2035"],le={notify:H.c,addCategory:function(e){return function(){var t=Object(o.a)(i.a.mark((function t(a,n,r){var c,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.getFirebase,s=r.api,a({type:"ADD_".concat(u.a,"_PENDING")}),t.abrupt("return",s({body:e,dispatch:a,getState:n,getFirebase:c,path:"addCategory"}).then((function(t){var n=t.addCategory;return a({type:"ADD_".concat(u.a,"_SUCCESS"),payload:e}),n})));case 3:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}()}},ue=Object(c.c)((function(e){return{categories:e.app.categories}}),le)((function(e){var t=e.notify,a=e.categories,r=e.addCategory,c=[{},{}],s=Object(k.a)(c,2),i=s[0],o=i.values,l=i.state,u=l.isModalOpen,d=l.isSubmitting,b=l.areFieldsMounted,j=s[1],f=j.setFormValues,p=j.setIsModalOpen,m=j.setIsSubmitting,O=j.setAreFieldsMounted,h=function(){p(!1)};return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(W,{isScrollable:!0,isOpen:u,title:"Add Category",className:"AddCategoryModal",isSubmitting:d,handleCloseModal:h,handlePrimaryClick:function(){var e="#cccccc";if(!o.isBill&&!o.isDeposit){var n=a.map((function(e){return e.color})),c=oe.filter((function(e){return!n.includes(e)}));e=Object(k.a)(c,1)[0]}var s=Object(q.a)(Object(q.a)({},o),{},{color:e});m(!0),r(s).then((function(e){(null===e||void 0===e?void 0:e.errors)||(h(),t({type:"success",subtitle:"You have successfully added a the ".concat(o.name," category.")}))})).finally((function(){m(!1),O(!1)}))},handleSecondaryClick:function(){f(Z())},isDisabled:!o.name.length||d,children:b&&Object(n.jsx)("div",{className:"CategoryFormFields",children:Object(n.jsx)(X,{formValues:o,setFormValues:f})})}),Object(n.jsx)("div",{className:"AddCategory",children:Object(n.jsxs)("button",{type:"button",className:E()("Button","Button--Primary"),onClick:function(){O(!0),p(!0)},children:[Object(n.jsx)(ie.a,{})," Add Category"]})})]})})),de={total:0,quantity:0,transactions:[]},be=function(e){var t=e.transactions,a=e.categories;if(!a.length)return[];var n=t.reduce((function(e,t){var n=t.categoryId,r=function(e,t){return(e||[]).find((function(e){return e.id===t}))}(a,n);return e[r.name]||(e[r.name]=Object(q.a)(Object(q.a)({},de),r)),e[r.name].quantity+=1,e[r.name].transactions.push(t),e[r.name].total+=t.amount,e}),{}),r=a.map((function(e){return Object(q.a)(Object(q.a)(Object(q.a)({},e),de),n[e.name])})),c=Object.entries(r);return c.sort((function(e,t){return t[1].total-e[1].total})),c.map((function(e){var t=Object(k.a)(e,2);t[0];return t[1]}))},je=(a(509),{notify:H.c,editCategory:function(e){return function(){var t=Object(o.a)(i.a.mark((function t(a,n,r){var c,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.getFirebase,s=r.api,a({type:"EDIT_".concat(u.a,"_PENDING")}),t.abrupt("return",s({body:e,dispatch:a,getState:n,getFirebase:c,path:"editCategory"}).then((function(t){var n=t.editCategory;return a({type:"EDIT_".concat(u.a,"_SUCCESS"),payload:e}),n})));case 3:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}()}}),fe=Object(c.c)((function(e){return{categories:e.app.categories,isLoading:e.ui.dashboard.isLoading.categoryList}}),je)((function(e){var t=e.bills,a=e.notify,c=e.deposits,s=e.isLoading,i=e.unplanned,o=e.classNames,l=e.categories,u=e.editCategory,d=Object(r.useState)(te.ALL),b=Object(k.a)(d,2),j=b[0],f=b[1],p=Object(r.useState)([]),m=Object(k.a)(p,2),O=m[0],h=m[1],g=[{},{}],N=Object(k.a)(g,2),C=N[0],S=C.values,w=C.state,F=w.isModalOpen,D=w.isFormDirty,T=w.isSubmitting,I=w.areFieldsMounted,M=N[1],L=M.setFormValues,P=M.setIsFormDirty,B=M.setIsModalOpen,_=M.setIsSubmitting,V=M.setAreFieldsMounted;Object(r.useEffect)((function(){h(be(j===te.ALL?{categories:l,transactions:(t||[]).concat(c||[]).concat(i||[])}:j===te.BILLS?{categories:v({app:{categories:l}}),transactions:t}:j===te.DEPOSITS?{categories:x({app:{categories:l}}),transactions:c}:{categories:y({app:{categories:l}}),transactions:i}))}),[j,i,c,l,t]);var U=function(){B(!1)},G=function(e){e.total,e.quantity;var t=Object(R.a)(e,["total","quantity"]);return function(){V(!0),L(t),P(!1),B(!0)}};return Object(n.jsxs)(A,{wrapped:!0,gridContent:!0,flexContent:!1,title:"Category List",className:E()("CategoryList",o),optionalContent:Object(n.jsx)(re,{setFilter:f}),children:[Object(n.jsx)(W,{isOpen:F,title:"Edit Category",isSubmitting:T,handleCloseModal:U,handlePrimaryClick:function(){_(!0),u(S).then((function(e){(null===e||void 0===e?void 0:e.errors)||(U(),a({type:"success",subtitle:"You have successfully updated a the ".concat(S.name," category.")}))})).finally((function(){_(!1),V(!1)}))},handleSecondaryClick:function(){L(Z())},isDisabled:!D||T,handleCloseModalComplete:function(){V(!1)},children:I&&Object(n.jsx)("div",{className:"CategoryFormFields",children:Object(n.jsx)(X,{formValues:S,setFormValues:L})})}),Object(n.jsx)("ul",{className:"Categories",children:s?Array(6).fill(se).map((function(e,t){return Object(n.jsx)(e,{},"CategorySkeleton-".concat(t))})):O.map((function(e,t){return Object(r.createElement)(ee,Object(q.a)(Object(q.a)({},e),{},{key:"Category-".concat(t),handleOnClick:G(e)}))}))}),Object(n.jsx)(ue,{})]})})),pe=a(497),me=function(e,t){if(!e.length||!t.length)return[];var a=e.reduce((function(e,a){var n=a.categoryId,r=function(e,t){return(e||[]).find((function(e){return e.id===t}))}(t,n);return e[r.name]||(e[r.name]={total:0,color:r.color}),e[r.name].total+=a.amount,e}),{}),n=Object.entries(a);return n.sort((function(e,t){return t[1].total-e[1].total})),{datasets:[{data:n.map((function(e){var t=Object(k.a)(e,2);t[0];return t[1].total})),backgroundColor:n.map((function(e){var t=Object(k.a)(e,2);t[0];return t[1].color}))}],labels:n.map((function(e){return Object(k.a)(e,1)[0]}))}},Oe=(a(512),Object(c.c)((function(e){return{categories:e.app.categories,isLoading:e.ui.dashboard.isLoading.overview}}))((function(e){var t,a,r=e.isLoading,c=e.unplanned,s=e.classNames,i=e.categories,o=me(c,i);return Object(n.jsx)(A,{wrapped:!0,centered:!0,title:"Overview",className:E()("OverviewChart",s),children:r?Object(n.jsx)(U.a,{}):Array.isArray(null===o||void 0===o||null===(t=o.datasets)||void 0===t||null===(a=t[0])||void 0===a?void 0:a.data)&&Object(n.jsx)(pe.Doughnut,{options:{cutoutPercentage:75,circumference:Math.PI,rotation:Math.PI,legend:{display:!1}},data:o})})}))),he=a(245),ge=a.n(he),ve=a(544),xe=a(545),ye=a(546),Ne=a(3),Ce=a.n(Ne),Se=(Ce.a.shape({id:Ce.a.string,isBill:Ce.a.bool,isDeposit:Ce.a.bool,name:Ce.a.string.isRequired,color:Ce.a.string.isRequired}),a(513),Object(c.c)((function(e){return{categories:e.app.categories}}))((function(e){var t=e.formValues,a=e.setFormValues,r=e.categories,c=function(e){return function(n){var r=Object(q.a)(Object(q.a)({},t),{},Object(z.a)({},e,isNaN(n)?n:Number(n)));a(r)}},s=function(e){return function(t){c(e)(t.target.value)}},i=function(e){var t;t=Array.isArray(e)?e[0]:new Date(e.target.value),c("date")(t.getTime())};return Object(n.jsxs)("div",{className:"AddTransactionForm",children:[Object(n.jsx)("div",{className:"Row",children:Object(n.jsx)(ve.a,{id:"amount",label:"Amount *",allowEmpty:!1,onChange:s("amount"),invalidText:"Please provide a valid amount"})}),Object(n.jsxs)("div",{className:"flex space-between split no-flex",children:[Object(n.jsx)(ae.a,{light:!0,id:"category",label:"Category",placeholder:"Filter...",onChange:s("categoryId"),className:"CategoryDropdown",children:function(){var e=ge()(r);return e.sort((function(e,t){return e.name>t.name?1:-1})),e}().map((function(e,t){return Object(n.jsx)(ne.a,{value:e.id,text:e.name},"Select-option-".concat(t))}))}),Object(n.jsx)(xe.a,{datePickerType:"single",onChange:i,children:Object(n.jsx)(ye.a,{required:!0,id:"paidOn",labelText:"Date *",placeholder:"MM/DD/YYYY",onChange:i,autoComplete:"off"})})]}),Object(n.jsx)("div",{className:"Row",children:Object(n.jsx)(J.a,{id:"description",labelText:"Description",onChange:s("description")})})]})}))),we=a(517),Fe=a(541),De=(a(518),function(e){var t=e.formValues,a=e.setFormValues,r=function(e){return function(n){var r=Object(q.a)(Object(q.a)({},t),{},Object(z.a)({},e,isNaN(n)?n:Number(n)));a(r)}},c=function(){var e=Object(o.a)(i.a.mark((function e(t){var a,n,c,s,o,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(k.a)(t.target.files,1),n=a[0],c=function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsText(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))},e.next=4,c(n);case 4:s=e.sent,o=Object(we.parse)(s,{skipEmptyLines:!0}),l=o.data,r("csv")(l.slice(1).map((function(e){var t=Object(k.a)(e,5),a=t[0],n=t[1],r=t[2],c=t[3];return{category:t[4],description:n,date:new Date(a).getTime(),amount:Number(r||c)||0}})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:"ImportStatementForm",children:[Object(n.jsx)("div",{className:"Row",children:Object(n.jsx)("p",{className:"bx--label-description no-margin",children:'Please format the file in this order "date", "description", "debit", "credit", "category"'})}),Object(n.jsx)("div",{className:"Row",children:Object(n.jsx)(Fe.a,{labelTitle:"File",accept:[".csv"],filenameStatus:"edit",onDelete:function(){r("csv")()},className:"FileUploader",buttonLabel:"Choose File",onChange:c,iconDescription:"Clear file",labelDescription:"Only .csv files are accepted."})})]})}),Te=(a(519),"ADD"),Ie="IMPORT",ke=(Y={},Object(z.a)(Y,Te,{amount:0,date:0,categoryId:"",description:""}),Object(z.a)(Y,Ie,{csv:[]}),Y),Me={notify:H.c,getTransactions:d,addTransaction:function(e){return function(){var t=Object(o.a)(i.a.mark((function t(a,n,r){var c,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.getFirebase,s=r.api,a({type:"ADD_".concat(u.c,"_PENDING")}),t.abrupt("return",s({body:e,dispatch:a,getState:n,getFirebase:c,path:"addTransaction"}).then((function(e){var t=e.addTransaction;return a({type:"ADD_".concat(u.c,"_SUCCESS"),payload:t}),t})));case 3:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}()},importStatement:function(e){return function(){var t=Object(o.a)(i.a.mark((function t(a,n,r){var c,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.getFirebase,s=r.api,a({type:"IMPORT_".concat(u.b,"_PENDING")}),t.abrupt("return",s({body:e,dispatch:a,getState:n,getFirebase:c,path:"importStatement"}).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.importStatement;return a({type:"IMPORT_".concat(u.b,"_SUCCESS"),payload:t}),t})));case 3:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}()}},Ee=Object(c.c)((function(e){return{categoriesExist:!!e.app.categories.length}}),Me)((function(e){var t=e.notify,a=e.addTransaction,c=e.categoriesExist,s=e.getTransactions,i=e.importStatement,o=Object(r.useState)(!1),l=Object(k.a)(o,2),u=l[0],d=l[1],b=Object(r.useState)(""),j=Object(k.a)(b,2),f=j[0],p=j[1],m=Object(r.useState)({}),O=Object(k.a)(m,2),h=O[0],g=O[1],v=Object(r.useState)(!1),x=Object(k.a)(v,2),y=x[0],N=x[1],C=Object(r.useState)(!1),S=Object(k.a)(C,2),w=S[0],F=S[1];Object(r.useEffect)((function(){var e=f===Te;N(e),g(ke[e?Te:Ie])}),[f]);var D=y?Se:De,T=y?"Add Transaction":"Import Statement",I=function(e){return function(){p(e),d(!0)}},M=function(){d(!1),setTimeout((function(){L()}),300)},L=function(){p("")};return Object(n.jsxs)(A,{small:!0,transparent:!0,className:"AddTransaction",children:[Object(n.jsx)(W,{isScrollable:!0,isOpen:u,title:T,isSubmitting:w,handleCloseModal:M,handlePrimaryClick:function(){F(!0),(y?a:i)(h).then((function(e){if(!(null===e||void 0===e?void 0:e.errors)){var a=y?"You successfully added an transaction":"You successfully imported transactions";M(),t({subtitle:a,type:"success"}),s(),g({})}})).finally((function(){F(!1)}))},handleSecondaryClick:L,handleCloseModalComplete:L,isDisabled:w||(y?!h.amount||!h.date:!(h.csv||[]).length),children:!!f&&Object(n.jsx)(D,{setFormValues:g,formValues:h})}),Object(n.jsx)("button",{type:"button",className:E()("Button","Button--Primary",{"Button--Primary-disabled":!c}),onClick:I(Ie),children:"Import Statement"}),Object(n.jsx)("button",{type:"button",className:E()("Button"),onClick:I(Te),children:"Add Transaction"})]})})),Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((function(e,t){return e+=t.amount}),0)},Ae=(a(520),Object(c.c)((function(e){return{isLoading:e.ui.dashboard.isLoading.overallSpending}}))((function(e){var t=e.classNames,a=e.transactions,r=e.isLoading,c=(e.dispatch,Object(R.a)(e,["classNames","transactions","isLoading","dispatch"])),s=Le(a);return Object(n.jsx)(A,Object(q.a)(Object(q.a)({small:!0,wrapped:!0,centered:!0,title:"Overall Spending",className:E()("OverallSpending",t)},c),{},{children:Object(n.jsx)("div",{className:E()("amount",{isLoading:r}),children:r?Object(n.jsx)(ce.a,{}):$(s)})}))}))),Pe=(a(521),Object(c.c)((function(e){return{isLoading:e.ui.dashboard.isLoading.transactionOverview}}))((function(e){e.date;var t=e.bills,a=e.deposits,r=(e.dispatch,e.isLoading),c=e.unplanned,s=e.classNames,i=Object(R.a)(e,["date","bills","deposits","dispatch","isLoading","unplanned","classNames"]),o=Le(t),l=Le(a),u=Le(c),d=l-u-o;return Object(n.jsxs)(A,Object(q.a)(Object(q.a)({small:!0,wrapped:!0,centered:!0,spaceBetween:!0,title:"Transaction Overview",className:E()("TransactionOverview",s)},i),{},{children:[Object(n.jsxs)("div",{className:"overviewGroup",children:[Object(n.jsx)("span",{className:"title",children:"Revenue"}),Object(n.jsx)("span",{className:E()("amount",{negative:d<0,positive:d>0}),children:r?Object(n.jsx)(ce.a,{}):$(d)})]}),Object(n.jsxs)("div",{className:"overviewGroup",children:[Object(n.jsx)("span",{className:"title",children:"Unplanned"}),Object(n.jsx)("span",{className:"amount",children:r?Object(n.jsx)(ce.a,{}):$(u)})]}),Object(n.jsxs)("div",{className:"overviewGroup",children:[Object(n.jsx)("span",{className:"title",children:"Bills"}),Object(n.jsx)("span",{className:"amount",children:r?Object(n.jsx)(ce.a,{}):$(o)})]})]}))}))),Be=a(526),_e=(a(522),Object(c.c)((function(e){return{chartData:I(e),isLoading:e.ui.dashboard.isLoading.categoryBreakdown}}))((function(e){var t=e.isLoading,a=e.chartData;return Object(n.jsx)(A,{wrapped:!0,centered:!0,title:"Category Breakdown",className:E()("StackedCategoryChart",{"StackedCategoryChart--Loading":t}),children:t?Object(n.jsx)(U.a,{}):Object(Be.a)((null===a||void 0===a?void 0:a.datasets)||[]).length?Object(n.jsx)(pe.Bar,{data:a,options:{scales:{xAxes:[{stacked:!0}],yAxes:[{stacked:!0}]}}}):null})}))),qe={getCategories:function(){return function(){var e=Object(o.a)(i.a.mark((function e(t,a,n){var r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.getFirebase,c=n.api,t({type:"".concat(u.a,"_PENDING")}),e.abrupt("return",c({dispatch:t,getState:a,getFirebase:r,path:"categories"}).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.categories;return t({type:"".concat(u.a,"_SUCCESS"),payload:a}),a})).finally((function(){t(b("categoryList"))})));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()},getTransactions:d},Re=Object(c.c)((function(e){return{isFetching:e.app.isFetching,transactions:T(e)}}),qe)((function(e){var t=e.getCategories,a=e.getTransactions,c=e.transactions,s=c.bills,i=c.deposits,o=c.unplanned;return Object(r.useEffect)((function(){t(),a()}),[]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:"cashFlow",children:[Object(n.jsx)(Ae,{transactions:s.concat(o)}),Object(n.jsx)(Pe,{bills:s,deposits:i,unplanned:o})]}),Object(n.jsxs)("div",{className:"monthAndAdd",children:[Object(n.jsx)(_,{}),Object(n.jsx)(Ee,{})]}),Object(n.jsx)(Oe,{unplanned:o}),Object(n.jsx)(fe,{bills:s,deposits:i,unplanned:o}),Object(n.jsx)(_e,{})]})})),Ve=(a(523),function(e){var t=e.children,a=e.name,r=Object(R.a)(e,["children","name"]);return Object(n.jsx)("div",Object(q.a)(Object(q.a)({className:E()("Page","Page-".concat(a))},r),{},{children:t}))}),Ue=a(247),Ge=function(e){var t=e.error,a=e.formValues,r=e.setState,c=e.toggleForm,s=e.formTypes,i=!!localStorage.getItem("hasRequestedAccess");return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:"form",children:[Object(n.jsx)(J.a,{id:"email",labelText:"Email",value:a.email,onChange:r("email")}),Object(n.jsx)(J.a,{id:"password",type:"password",labelText:"Password",value:a.password,onChange:r("password")})]}),t&&Object(n.jsx)("div",{className:"ErrorWrapper",children:Object(n.jsx)("p",{className:"bx--label error",children:t})}),Object(n.jsxs)("div",{className:"actions",children:[!i&&Object(n.jsx)("div",{className:"buttonWrapper",children:Object(n.jsx)("button",{className:"TextButton",onClick:c(s.request),children:"Request Access"})}),Object(n.jsx)("div",{className:"buttonWrapper",children:Object(n.jsx)("button",{className:"TextButton",onClick:c(s.forgot),children:"Forgot Password?"})})]})]})},Ye=function(e){var t=e.error,a=e.setState,r=e.formValues;return e.submittedSuccessfully?Object(n.jsx)("span",{className:"pending",children:"If approved, you'll get an email shortly to set your password."}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("p",{className:"cta",children:"Let me know if you are interested in trying this app out."}),Object(n.jsxs)("div",{className:"form",children:[Object(n.jsxs)("div",{className:"Row",children:[Object(n.jsx)(J.a,{id:"firstName",labelText:"First Name",value:r.firstName,onChange:a("firstName")}),Object(n.jsx)(J.a,{id:"lastName",labelText:"Last Name",value:r.lastName,onChange:a("lastName")})]}),Object(n.jsx)(J.a,{id:"email",labelText:"Email",value:r.email,onChange:a("email")})]}),t&&Object(n.jsx)("div",{className:"ErrorWrapper",children:Object(n.jsx)("p",{className:"bx--label error",children:t})})]})},We=function(e){var t=e.error,a=e.setState,r=e.formValues;return e.submittedSuccessfully?Object(n.jsx)("span",{className:"pending",children:"You will receive an email in order to reset your password shortly."}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("p",{className:"cta",children:"Please enter your email address."}),Object(n.jsx)("div",{className:"form",children:Object(n.jsx)(J.a,{id:"email",labelText:"Email",value:r.email,onChange:a("email")})}),t&&Object(n.jsx)("div",{className:"ErrorWrapper",children:Object(n.jsx)("p",{className:"bx--label error",children:t})})]})},He=(a(524),{firstName:"",lastName:"",email:"",password:""}),ze={signIn:"signIn",forgot:"forgot",request:"request"},Je={login:function(e){return function(){var t=Object(o.a)(i.a.mark((function t(a,n,r){var c,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.getFirebase,r.api,s=c(),a({type:"".concat(Ue.c,"_PENDING")}),t.prev=3,t.next=6,s.login(e);case 6:return a({type:"".concat(Ue.c,"_SUCCESS")}),t.abrupt("return");case 10:throw t.prev=10,t.t0=t.catch(3),a({type:"".concat(Ue.c,"_FAILURE"),payload:t.t0.message}),new Error(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e,a,n){return t.apply(this,arguments)}}()},requestAccess:function(e){return function(){var t=Object(o.a)(i.a.mark((function t(a,n,r){var c,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.getFirebase,s=r.api,a({type:"".concat(Ue.b,"_PENDING")}),t.abrupt("return",s({body:e,dispatch:a,getState:n,getFirebase:c,path:"requestAccess"}).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.requestAccess,n=(t=void 0===t?{}:t).errors,r=Object(R.a)(t,["errors"]);if(console.warn({errors:n,requestAccess:r}),n)throw a({type:"".concat(Ue.b,"_FAILURE"),payload:n}),new Error(n[0].message);return a({type:"".concat(Ue.b,"_SUCCESS"),payload:r}),localStorage.setItem("hasRequestedAccess",!0),r})));case 3:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}()},forgotPassword:function(e){var t=e.email;return function(){var e=Object(o.a)(i.a.mark((function e(a,n,r){var c,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=r.getFirebase,r.api,a({type:"".concat(Ue.a,"_PENDING")}),s=c(),e.abrupt("return",s.resetPassword(t).catch((function(e){throw new Error(e.message)})));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()}},Ke=Object(c.c)(null,Je)((function(e){var t=e.login,a=e.requestAccess,c=e.forgotPassword,s=Object(r.useState)(""),i=Object(k.a)(s,2),o=i[0],l=i[1],u=Object(r.useState)(ze.signIn),d=Object(k.a)(u,2),b=d[0],j=d[1],f=Object(r.useState)(He),p=Object(k.a)(f,2),m=p[0],O=p[1],h=Object(r.useState)(!1),g=Object(k.a)(h,2),v=g[0],x=g[1],y=b===ze.signIn?Ge:b===ze.request?Ye:We,N=b===ze.signIn?"Sign In":b===ze.request?"Request Access":"Forgot Password",C=b===ze.signIn?"Sign In":b===ze.request?"Request Access":"Submit";return Object(n.jsx)("div",{className:E()("SignIn","SignIn--".concat(b),{"Signin--submitted":v}),children:Object(n.jsx)(V.a,{open:!0,hasForm:!0,size:"sm",shouldSubmitOnEnter:!0,preventCloseOnClickOutside:!0,modalHeading:N,secondaryButtonText:"Clear",primaryButtonText:C,onRequestSubmit:function(){(b===ze.signIn?t:b===ze.request?a:c)(b===ze.signIn?{email:m.email,password:m.password}:b===ze.request?{email:m.email,firstName:m.firstName,lastName:m.lastName}:{email:m.email}).then((function(e){l(""),x(!0)})).catch((function(e){l(e.message)}))},onSecondarySubmit:function(){O(He),l("")},"aria-label":"".concat(N," Modal"),children:Object(n.jsx)(y,{error:o,setState:function(e){return function(t){var a=Object(q.a)(Object(q.a)({},m),{},Object(z.a)({},e,t.target.value));O(a)}},formTypes:ze,formValues:m,toggleForm:function(e){return function(){j(e)}},submittedSuccessfully:v})})})})),Qe=Object(j.a)([function(e){return e.firebase.auth.isLoaded}],(function(e){return e})),Xe=Object(j.a)([function(e){return e.firebase.auth.isInitializing}],(function(e){return e})),Ze=Object(j.a)([Qe,Xe,function(e){return e.firebase.auth}],(function(e,t,a){return t||!e?null:!!a.uid}));a(525),t.default=Object(c.c)((function(e){return{isSignedIn:Ze(e),hasFirebaseLoaded:Qe(e)}}))((function(e){var t=e.isSignedIn;return e.hasFirebaseLoaded?Object(n.jsx)(Ve,{name:"Home",children:t?Object(n.jsx)(Re,{}):Object(n.jsx)(Ke,{})}):null}))}}]);
//# sourceMappingURL=4.ad1a7f5a.chunk.js.map